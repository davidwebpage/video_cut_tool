# 媒体素材管理工具

## 项目简介

媒体素材管理工具是一款基于 Electron 开发的专业视频剪切工具，提供了直观的界面和强大的视频处理功能，帮助用户快速剪切和管理视频素材。该工具特别注重用户体验和处理效率，支持批量操作和元数据保留，适合视频内容创作者、媒体工作者和个人用户使用。

## 主要功能

### 核心功能
- **多方式视频导入**：支持单个文件导入、整个文件夹批量导入和拖放导入
- **实时视频预览**：内置视频播放器，支持播放控制和全屏预览
- **精确视频剪切**：可视化时间轴和精确的时间点设置，支持毫秒级精度
- **批量操作支持**：支持多选视频进行批量导出和删除，提高工作效率
- **智能导出管理**：显示每个视频的导出进度和状态，自动处理文件名冲突

### 界面功能
- **可自定义键盘快捷键**：支持空格键播放/暂停、Q/E 前后移动、F 全屏等操作
- **灵活选择操作**：支持 Ctrl+点击多选、Ctrl+A 全选视频文件
- **实时状态栏显示**：动态显示选中视频数量和操作状态
- **智能缩略图显示**：自动生成视频预览图，保持原始比例显示
- **可调整面板布局**：支持拖动调整视频列表面板宽度，适应不同屏幕尺寸

### 导出功能
- **元数据保留**：导出视频保留原始拍摄时间、格式等元数据信息
- **实时进度显示**：每个视频独立的导出进度条，直观展示处理状态
- **状态持久管理**：导出完成后持久显示完成状态，便于查看历史操作
- **智能文件名处理**：长文件名自动截断，保持可读性，避免显示混乱

## 技术栈

### 前端技术
- **HTML5 + CSS3 + JavaScript**：构建响应式用户界面的基础技术
  - HTML5：负责页面结构和语义化元素布局
  - CSS3：实现现代美观的界面样式和动画效果
  - JavaScript：处理用户交互、数据处理和界面逻辑

- **Electron 框架**：跨平台桌面应用开发框架
  - 版本：^27.1.0（最新稳定版）
  - 提供桌面应用窗口管理、系统功能访问能力
  - 支持将网页技术转换为原生桌面应用体验

- **Flexbox 布局**：现代 CSS 布局技术
  - 实现灵活的界面布局和响应式设计
  - 确保界面元素在不同尺寸窗口中正确对齐和分布

- **原生 JavaScript 实现**：无框架依赖的核心逻辑
  - 代码结构清晰，易于理解和维护
  - 减少依赖体积，提高应用启动和运行速度

### 后端技术
- **Node.js**：JavaScript 运行时环境
  - 处理文件系统操作、系统权限相关任务
  - 提供模块化的代码组织和依赖管理

- **FFmpeg**：专业视频处理引擎
  - 版本：已优化的 96MB 版本（比原始版本小一半以上）
  - 功能：视频剪切、格式转换、元数据提取等
  - 集成方式：通过命令行调用，实现高效视频处理

- **Electron IPC 通信**：主进程与渲染进程通信机制
  - 实现前后端数据传递和事件通知
  - 确保视频处理等耗时操作不阻塞用户界面

### 依赖库
| 依赖项 | 版本 | 用途 |
|-------|------|------|
| electron | ^27.1.0 | 桌面应用框架 |
| fluent-ffmpeg | ^2.1.2 | Node.js 的 FFmpeg 包装库 |
| electron-builder | ^26.0.12 | 应用打包工具 |

## 项目结构

```
媒体素材管理工具/
├── node_modules             # npm 自动生成的“依赖仓库”——项目所有第三方包的源码、可执行文件、元数据都按树状结构扔在这里，仅供运行和编译时查找，执行npm install时，会自动刷新
├── *simple.html              # 界面：主应用界面
├── *main.js                  # Electron 主进程，处理核心逻辑和视频处理，拥有操作系统的全部权限，创建和管理窗口，加载前端，管理生命周期，控制窗口等
├── preload.js               # 预加载脚本，处理 IPC 通信，限制网页直接访问底层系统，在渲染进程（网页前端）和主进程之间建立安全通信桥梁
├── keyboard-shortcuts.html  # 界面：快捷键设置界面
├── package.json             # 项目配置和依赖管理，记录了你的项目名称、版本、作者，以及最重要的——项目依赖了哪些包，运行 npm install 时，npm 就会根据这个文件来安装所有需要的包。
├── package-lock.json        # 依赖锁定文件，确保在所有环境中安装的依赖包版本完全一致，改完 package.json 后，只要重新执行一次 npm install，npm 会自动把 package-lock.json 同步到最新，不需要手动书写！
├── ffmpeg.exe               # 视频处理工具（外部依赖）
├── ffmpeg_output.log        # FFmpeg 输出日志（自动生成）
├── 视频剪切工具图标_256x256.ico # 应用图标
└── 说明.md                  # 项目说明文档
```

## 如何运行

### 开发环境运行
1. **系统要求**：
   - Windows 10 或更高版本
   - Node.js 14.0 或更高版本
   - npm 6.0 或更高版本
   - 至少 4GB 内存

2. **运行步骤**：
   1. 确保已安装 Node.js
   2. 安装项目依赖：`npm install`
   3. 启动应用：`npm start`

### 构建打包
1. **构建步骤**：
   1. 安装项目依赖：`npm install`
   2. 构建前端资源：`npm run build`
   3. 构建产物将生成在 `dist` 目录
   4. 打包应用为可执行文件：`npm run package`

2. **打包配置**：
   - 目标平台：Windows (x64)
   - 打包格式：NSIS 安装包
   - 应用图标：`视频剪切工具图标_256x256.ico`

## 配置、部署与开发

### 配置文件说明

#### package.json 配置
- **应用信息**：定义应用名称、版本、描述等基本信息
- **脚本命令**：包含启动、构建、打包等操作命令
- **依赖管理**：声明项目所需的 npm 包依赖
- **构建配置**：设置 Electron Builder 的打包参数

#### 主要配置项
| 配置项 | 说明 | 值 |
|-------|------|-----|
| name | 应用名称 | video-cutter-pro |
| version | 应用版本 | 1.0.0 |
| main | 主进程入口文件 | main.js |
| scripts | 命令脚本 | start, build, package 等 |
| dependencies | 生产依赖 | fluent-ffmpeg ^2.1.2 |
| devDependencies | 开发依赖 | electron ^27.1.0, electron-builder ^26.0.12 |
| build | 打包配置 | 包含 appId, productName, win 等 |

### 开发流程

1. **环境搭建**：
   - 安装 Node.js 和 npm
   - 克隆或下载项目代码
   - 安装依赖：`npm install`

2. **开发调试**：
   - 启动开发模式：`npm start`
   - 按 F12 打开开发者工具
   - 修改代码后自动重载（部分修改可能需要手动重启）

3. **代码结构**：
   - `main.js`：主进程代码，处理核心逻辑
   - `simple.html`：渲染进程代码，用户界面
   - `preload.js`：预加载脚本，IPC 通信
   - `keyboard-shortcuts.html`：快捷键设置界面

4. **调试技巧**：
   - 使用 `console.log()` 输出调试信息
   - 查看 `ffmpeg_output.log` 文件了解 FFmpeg 执行情况
   - 利用开发者工具的网络、控制台和元素面板

### 部署策略

1. **本地部署**：
   - 直接运行 `npm start` 启动应用
   - 适合开发和测试阶段

2. **打包部署**：
   - 执行 `npm run package` 生成安装包
   - 安装包将位于 `dist` 目录
   - 可分发给其他用户安装使用

3. **更新策略**：
   - 修改版本号：更新 package.json 中的 version 字段
   - 重新打包：执行 `npm run package` 生成新版本安装包
   - 分发更新：提供新版本安装包给用户

4. **依赖管理**：
   - **FFmpeg**：确保 `ffmpeg.exe` 文件存在于项目根目录
   - **npm 依赖**：使用 `npm install` 安装和更新依赖
   - **版本锁定**：使用 package-lock.json 锁定依赖版本

### 开发注意事项

1. **性能优化**：
   - 避免在渲染进程中执行耗时操作
   - 使用异步操作处理文件和网络请求
   - 合理管理内存，及时释放不再使用的资源

2. **跨平台兼容性**：
   - 注意路径分隔符：Windows 使用 `\`，Unix 系统使用 `/`
   - 避免使用平台特定的 API
   - 测试不同操作系统下的运行情况

3. **安全考虑**：
   - 验证用户输入，避免路径遍历攻击
   - 限制外部命令的参数，防止命令注入
   - 保护用户隐私，不收集敏感信息

4. **代码规范**：
   - 使用一致的缩进和命名规范
   - 添加适当的注释说明复杂逻辑
   - 模块化代码，提高可维护性

5. **测试建议**：
   - 测试不同格式和大小的视频文件
   - 验证批量操作的稳定性
   - 测试各种边界情况和异常处理

## 使用说明

### 基本操作流程
1. **导入视频**：
   - 点击顶部导航栏的"导入视频"按钮
   - 或点击"导入文件夹"按钮批量导入
   - 或直接拖放视频文件到应用窗口

2. **选择与预览视频**：
   - 点击左侧视频列表中的视频进行选择
   - 右侧预览窗口将自动加载并播放选中视频
   - 视频信息面板显示视频的详细元数据

3. **设置剪切范围**：
   - 在时间轴上拖动剪切区域调整范围
   - 或拖动两端手柄精确设置开始/结束点
   - 或使用"当前位置"按钮快速设置时间点
   - 或直接在时间输入框中输入精确时间

4. **导出视频**：
   - 选择要导出的一个或多个视频
   - 点击顶部导航栏的"导出视频"按钮
   - 选择导出目录
   - 等待导出完成，查看导出状态

### 高级操作
- **批量导出**：按住 Ctrl 键点击选择多个视频，然后点击导出按钮
- **批量删除**：选择多个视频后，点击左侧面板的"删除"按钮
- **快捷键设置**：点击菜单栏"编辑" > "快捷键"，自定义操作快捷键
- **开发者工具**：按 F12 键打开开发者工具，用于调试和查看日志

### 键盘快捷键
| 快捷键 | 功能描述 |
|--------|----------|
| **空格** | 播放/暂停视频 |
| **Q** | 视频后退 1 秒 |
| **E** | 视频前进 1 秒 |
| **F** | 切换全屏模式 |
| **1** | 设置当前位置为剪切开始时间 |
| **2** | 设置当前位置为剪切结束时间 |
| **Delete** | 删除选中的视频文件 |
| **Ctrl+A** | 全选视频列表中的所有视频 |
| **Ctrl+点击** | 多选视频文件 |
| **F12** | 打开/关闭开发者工具 |

## 注意事项

1. **FFmpeg 依赖**：
   - 应用需要 `ffmpeg.exe` 文件才能正常执行视频处理操作
   - 请确保 `ffmpeg.exe` 文件存在于项目根目录
   - 当前使用的是优化后的 96MB 版本，已减小体积但保持功能完整

2. **文件处理性能**：
   - 视频文件较大时，导入和预览可能需要一些时间
   - 导出过程中请耐心等待，不要关闭应用或中断进程
   - 建议在处理大型视频时关闭其他占用系统资源的应用

3. **系统要求**：
   - **操作系统**：Windows 10 或更高版本
   - **内存**：至少 4GB RAM（建议 8GB 以上）
   - **存储空间**：至少 200MB 可用空间（包含应用和临时文件）
   - **处理器**：双核处理器或更高（建议四核以上）

4. **已知问题与限制**：
   - 暂不支持视频合并功能
   - 不支持添加水印、字幕等高级编辑功能
   - 大视频文件（超过 10GB）处理可能需要较长时间
   - 部分特殊编码的视频可能无法生成预览图

5. **日志与调试**：
   - FFmpeg 处理输出会保存到 `ffmpeg_output.log` 文件
   - 应用运行日志可通过按 F12 打开开发者工具查看
   - 遇到问题时，请提供日志文件以便于排查

## 版本历史

### v1.0.0 (2026-01-06)
- **初始版本发布**
- 实现核心视频剪切功能
- 添加批量操作支持（导出、删除）
- 优化界面布局和用户体验
- 实现视频元数据提取和保留
- 添加键盘快捷键支持
- 实现拖拽导入功能

## 开发者信息

- **项目类型**：桌面应用
- **开发工具**：Visual Studio Code
- **构建工具**：Electron Builder
- **运行环境**：Windows
- **技术架构**：Electron + Node.js + FFmpeg

## 许可证

本项目仅供个人学习和使用，未经授权不得用于商业用途。
© 2026 媒体素材管理工具开发团队